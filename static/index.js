$('#showAdvanced').click(function(){
    if ($('#advanced').is(':visible'))
        $('#advanced').hide()
    else
        $('#advanced').show()
});

// http://flisland.net/ajaxro/genre?op=getList
genres = {"Наука, Образование":[{"name":"История","code":"sci_history"},{"name":"Психология и психотерапия","code":"sci_psychology"},{"name":"Философия","code":"sci_philosophy"},{"name":"Политика","code":"sci_politics"},{"name":"Юриспруденция","code":"sci_juris"},{"name":"Языкознание, иностранные языки","code":"sci_linguistic"},{"name":"Медицина","code":"sci_medicine"},{"name":"Физика","code":"sci_phys"},{"name":"Математика","code":"sci_math"},{"name":"Химия","code":"sci_chem"},{"name":"Биология, биофизика, биохимия ","code":"sci_biology"},{"name":"Научная литература","code":"science"},{"name":"Экономика","code":"sci_economy"},{"name":"Государство и право","code":"sci_state"},{"name":"Геология и география","code":"sci_geo"},{"name":"Астрономия и Космос","code":"sci_cosmos"},{"name":"Альтернативная медицина","code":"sci_medicine_alternative"},{"name":"Литературоведение","code":"sci_philology"},{"name":"Зарубежная образовательная литература, зарубежная прикладная,  научно-популярная  литература","code":"sci_popular"},{"name":"Военная история","code":"military_history"},{"name":"Обществознание, социология","code":"sci_social_studies"},{"name":"Зоология","code":"sci_zoo"},{"name":"Ботаника","code":"sci_botany"},{"name":"Экология","code":"sci_ecology"},{"name":"Востоковедение","code":"sci_oriental"},{"name":"Альтернативные науки и научные теории","code":"sci_theories"},{"name":"Ветеринария","code":"sci_veterinary"}],"Детективы и Триллеры":[{"name":"Классический детектив","code":"det_classic"},{"name":"Полицейский детектив","code":"det_police"},{"name":"Боевик","code":"det_action"},{"name":"Иронический детектив, дамский детективный роман","code":"det_irony"},{"name":"Исторический детектив","code":"det_history"},{"name":"Шпионский детектив","code":"det_espionage"},{"name":"Криминальный детектив","code":"det_crime"},{"name":"Политический детектив","code":"det_political"},{"name":"Про маньяков","code":"det_maniac"},{"name":"Крутой детектив","code":"det_hard"},{"name":"Триллер","code":"thriller"},{"name":"Детективы","code":"detective"},{"name":"Советский детектив","code":"det_su"}],"Проза":[{"name":"Проза","code":"prose"},{"name":"Классическая проза","code":"prose_classic"},{"name":"Историческая проза","code":"prose_history"},{"name":"Современная русская и зарубежная проза","code":"prose_contemporary"},{"name":"Контркультура","code":"prose_counter"},{"name":"Русская классическая проза","code":"prose_rus_classic"},{"name":"Советская классическая проза","code":"prose_su_classics"},{"name":"Проза о войне","code":"prose_military"},{"name":"Зарубежная классическая проза","code":"foreign_prose"},{"name":"Средневековая классическая проза","code":"foreign_antique"},{"name":"Классическая проза XVII-XVIII веков","code":"literature_18"},{"name":"Классическая проза ХIX века","code":"literature_19"},{"name":"Классическая проза ХX века","code":"literature_20"},{"name":"Готический роман","code":"gothic_novel"},{"name":"Магический реализм","code":"prose_magic"},{"name":"Эпистолярная проза","code":"epistolary_fiction"},{"name":"Экспериментальная, неформатная проза","code":"prose_neformatny"},{"name":"Афоризмы, цитаты","code":"aphorisms"},{"name":"Роман, повесть","code":"great_story"},{"name":"Малые литературные формы прозы: рассказы, эссе, новеллы, феерия","code":"story"},{"name":"Фантасмагория, абсурдистская проза","code":"prose_abs"}],"Дом и семья":[{"name":"Кулинария","code":"home_cooking"},{"name":"Домашние животные","code":"home_pets"},{"name":"Хобби и ремесла","code":"home_crafts"},{"name":"Развлечения","code":"home_entertain"},{"name":"Здоровье","code":"home_health"},{"name":"Сад и огород","code":"home_garden"},{"name":"Сделай сам","code":"home_diy"},{"name":"Боевые искусства, спорт ","code":"home_sport"},{"name":"Семейные отношения, секс","code":"home_sex"},{"name":"Домоводство","code":"home"},{"name":"Педагогика, воспитание детей, литература для родителей ","code":"sci_pedagogy"},{"name":"Автомобили и ПДД","code":"auto_regulations"},{"name":"Коллекционирование","code":"home_collecting"},{"name":"Семейные отношения","code":"family"}],"Деловая литература":[{"name":"Финансы","code":"banking"},{"name":"Маркетинг, PR","code":"org_behavior"},{"name":"Карьера, кадры","code":"popular_business"},{"name":"Деловая литература","code":"economics_ref"},{"name":"Экономика","code":"economics"}],"Справочная литература":[{"name":"Энциклопедии","code":"ref_encyc"},{"name":"Словари","code":"ref_dict"},{"name":"Справочники","code":"ref_ref"},{"name":"Руководства","code":"ref_guide"},{"name":"Справочная литература","code":"reference"},{"name":"Путеводители, карты, атласы ","code":"geo_guides"}],"Драматургия":[{"name":"Драматургия","code":"dramaturgy"},{"name":"Комедия","code":"comedy"},{"name":"Трагедия","code":"tragedy"},{"name":"Драма","code":"drama"},{"name":"Античная драма","code":"drama_antique"},{"name":"Сценарий","code":"screenplays"},{"name":"Мистерия, буффонада, водевиль","code":"vaudeville"}],"Юмор":[{"name":"Анекдоты","code":"humor_anecdote"},{"name":"Юмористическая проза","code":"humor_prose"},{"name":"Юмор","code":"humor"},{"name":"Сатира","code":"humor_satire"}],"Приключения":[{"name":"Исторические приключения","code":"adv_history"},{"name":"Вестерн, про индейцев ","code":"adv_indian"},{"name":"Морские приключения","code":"adv_maritime"},{"name":"Путешествия и география","code":"adv_geo"},{"name":"Природа и животные","code":"adv_animal"},{"name":"Приключения","code":"adventure"},{"name":"Приключения для детей и подростков","code":"child_adv"},{"name":"Приключения в современном мире","code":"adv_modern"},{"name":"Рыцарский роман","code":"tale_chivalry"}],"Искусство, Искусствоведение, Дизайн":[{"name":"Культурология","code":"sci_culture"},{"name":"Критика","code":"nonf_criticism"},{"name":"Искусство и Дизайн","code":"design"},{"name":"Партитуры","code":"notes"},{"name":"Музыка","code":"music"},{"name":"Живопись, альбомы, иллюстрированные каталоги","code":"painting"},{"name":"Скульптура и архитектура","code":"architecture_book"},{"name":"Мировая художественная культура","code":"art_world_culture"},{"name":"Кино","code":"cine"},{"name":"Театр","code":"theatre"},{"name":"Искусствоведение","code":"art_criticism"}],"Компьютеры и Интернет":[{"name":"ОС и Сети, интернет","code":"comp_www"},{"name":"Компьютерное 'железо' (аппаратное обеспечение), цифровая обработка сигналов","code":"comp_hard"},{"name":"Программирование, программы, базы данных","code":"comp_db"},{"name":"Зарубежная компьютерная, околокомпьютерная литература ","code":"computers"},{"name":"Учебные пособия, самоучители","code":"tbg_computers"}],"Поэзия":[{"name":"Поэзия","code":"poetry"},{"name":"Юмористические стихи, басни ","code":"humor_verse"},{"name":"Классическая поэзия","code":"poetry_classical"},{"name":"Современная поэзия","code":"poetry_modern"},{"name":"Классическая русская поэзия","code":"poetry_rus_classical"},{"name":"Современная русская поэзия","code":"poetry_rus_modern"},{"name":"Классическая зарубежная поэзия","code":"poetry_for_classical"},{"name":"Современная зарубежная поэзия","code":"poetry_for_modern"},{"name":"Поэзия Востока","code":"poetry_east"},{"name":"Лирика","code":"lyrics"},{"name":"Песенная поэзия","code":"song_poetry"},{"name":"Поэма, эпическая поэзия","code":"poem"},{"name":"Визуальная и экспериментальная поэзия, верлибры, палиндромы","code":"palindromes"}],"Религия, духовность, эзотерика":[{"name":"Религиоведение","code":"sci_religion"},{"name":"Эзотерика, эзотерическая литература ","code":"religion_esoterics"},{"name":"Самосовершенствование","code":"religion_self"},{"name":"Религия, религиозная литература","code":"religion"},{"name":"Буддизм","code":"religion_budda"},{"name":"Христианство","code":"religion_christianity"},{"name":"Православие","code":"religion_orthodoxy"},{"name":"Протестантизм","code":"religion_protestantism"},{"name":"Католицизм","code":"religion_catholicism"},{"name":"Иудаизм","code":"religion_judaism"},{"name":"Индуизм","code":"religion_hinduism"},{"name":"Ислам","code":"religion_islam"},{"name":"Язычество","code":"religion_paganism"},{"name":"Астрология и хиромантия","code":"astrology"}],"Фантастика":[{"name":"Альтернативная история, попаданцы","code":"sf_history"},{"name":"Боевая фантастика","code":"sf_action"},{"name":"Эпическая фантастика","code":"sf_epic"},{"name":"Героическая фантастика","code":"sf_heroic"},{"name":"Детективная фантастика","code":"sf_detective"},{"name":"Киберпанк","code":"sf_cyberpunk"},{"name":"Космическая фантастика","code":"sf_space"},{"name":"Социально-психологическая фантастика","code":"sf_social"},{"name":"Ужасы","code":"sf_horror"},{"name":"Юмористическая фантастика","code":"sf_humor"},{"name":"Фэнтези","code":"sf_fantasy"},{"name":"Научная Фантастика","code":"sf"},{"name":"Городское фэнтези","code":"sf_fantasy_city"},{"name":"Постапокалипсис","code":"sf_postapocalyptic"},{"name":"Фантастика","code":"sf_etc"},{"name":"Славянское фэнтези","code":"russian_fantasy"},{"name":"Технофэнтези","code":"sf_technofantasy"},{"name":"Мифологическое фэнтези","code":"fairy_fantasy"},{"name":"Хроноопера","code":"hronoopera"},{"name":"Мистика","code":"sf_mystic"},{"name":"Стимпанк","code":"sf_stimpank"},{"name":"Современная сказка","code":"modern_tale"},{"name":"ЛитРПГ","code":"sf_litrpg"}],"Старинное":[{"name":"Античная литература","code":"antique_ant"},{"name":"Европейская старинная литература","code":"antique_european"},{"name":"Древнерусская литература","code":"antique_russian"},{"name":"Древневосточная литература","code":"antique_east"},{"name":"antique","code":"antique"}],"Документальная литература":[{"name":"Биографии и Мемуары","code":"nonf_biography"},{"name":"Публицистика","code":"nonf_publicism"},{"name":"Документальная литература","code":"nonfiction"},{"name":"Военная документалистика и аналитика","code":"nonf_military"},{"name":"Военное дело","code":"military_special"},{"name":"География, путевые заметки","code":"travel_notes"}],"Фольклор":[{"name":"Мифы. Легенды. Эпос","code":"antique_myths"},{"name":"Фольклор, загадки folklore","code":"folklore"},{"name":"Народные сказки","code":"folk_tale"},{"name":"Былины, эпопея","code":"epic"},{"name":"Пословицы, поговорки","code":"proverbs"},{"name":"Народные песни","code":"folk_songs"},{"name":"Детский фольклор","code":"child_folklore"},{"name":"Частушки, прибаутки, потешки","code":"limerick"}],"Техника":[{"name":"Технические науки","code":"sci_tech"},{"name":"Транспорт и авиация","code":"sci_transport"},{"name":"Металлургия","code":"sci_metal"},{"name":"Радиоэлектроника","code":"sci_radio"},{"name":"Строительство и сопромат","code":"sci_build"},{"name":"Военное дело, военная техника и вооружение","code":"military_weapon"},{"name":"Автодело","code":"auto_business"},{"name":"История техники","code":"equ_history"}],"Учебники и пособия":[{"name":"Учебники и пособия","code":"sci_textbook"},{"name":"Школьные учебники и пособия, рефераты, шпаргалки","code":"tbg_school"},{"name":"Учебники и пособия для среднего и специального образования","code":"tbg_secondary"},{"name":"Учебники и пособия ВУЗов","code":"tbg_higher"}],"Литература для детей":[{"name":"Сказки народов мира","code":"child_tale"},{"name":"Стихи для детей","code":"child_verse"},{"name":"Проза для детей","code":"child_prose"},{"name":"Фантастика для детей","code":"child_sf"},{"name":"Детская остросюжетная литература","code":"child_det"},{"name":"Детская образовательная литература","code":"child_education"},{"name":"Детская литература","code":"children"},{"name":"Классическая детская литература","code":"child_classical"},{"name":"Русские сказки","code":"child_tale_rus"},{"name":"Зарубежная литература для детей","code":"foreign_children"},{"name":"Игры, упражнения для детей","code":"prose_game"}],"Любовные романы":[{"name":"Современные любовные романы","code":"love_contemporary"},{"name":"Исторические любовные романы","code":"love_history"},{"name":"Остросюжетные любовные романы","code":"love_detective"},{"name":"Короткие любовные романы","code":"love_short"},{"name":"Эротическая литература","code":"love_erotica"},{"name":"Любовные романы","code":"love"},{"name":"Любовное фэнтези, любовно-фантастические романы ","code":"love_sf"},{"name":"Порно","code":"love_hard"}],"Прочее":[{"name":"Неотсортированное","code":"other"},{"name":"Журналы, газеты ","code":"periodic"},{"name":"Комиксы","code":"comics"},{"name":"Незавершенное","code":"unfinished"},{"name":"Фанфик","code":"fanfiction"},{"name":"Самиздат, сетевая литература","code":"network_literature"}]}

for (var group in genres)
{
    $('#genres').append(
        $('<option/>', {
            text: group,
            disabled: true
        })
    );
    for (var i = 0; i < genres[group].length; i++) {
        $('#genres').append(
            $('<option/>', {
                value: genres[group][i].code,
                text: ' ' + genres[group][i].name  //&emsp; + ...
            })
        )
    }
}

// Сначала получил все языки с `select distinct lang from books`, а потом, с помощью for, выполнил `select count() from (select lang from books where lang=?)` для всех языков
// Затем отсортировал по count
languages = ["ru","en","bg","uk","es","pl","fr","de","be","it","lv","eo","cs","nl","pt","hu","ro","lt","","zh","sr","el","io","sv","sk","la","tr","uz","az","vi","da","ua","cv","fi","kk","sq","ar","un","no","is","sp","EN-US","ja","id","hr","ba","he","cu","tt","ko","ga","кг","et","ms","tg","ne","RU","ka","ca","ру"]

for (var lang in languages)
{
    $('#languages').append(
        $('<option/>',{
            value: languages[lang],
            text: languages[lang]
        })
    )
}